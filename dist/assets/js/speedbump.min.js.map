{"version":3,"sources":["speedbump.js"],"names":["speedBumpModal","options","settings","Object","assign","speedBumpTitle","speedBumpSummary","speedBumpContinueLink","speedBumpContinueLinkClass","speedBumpCancelLink","speedBumpCancelClass","speedBumpIgnoreArray","speedBumpHeadingTag","speedBumpCloseButtonClass","speedBumpCloseIconClass","continueClass","cancelClass","closeClass","document","createElement","classList","add","tabIndex","role","setAttribute","body","appendChild","speedBumpDialog","speedBumpContent","speedBumpHeadingTagString","replace","id","innerHTML","classesToArray","forEach","item","href","type","speedBumpCloseButton","prepend","speedBumpCloseIcon","className","focusBeforeSpeedbump","speedBumpHide","remove","anchor","querySelector","focus","removeAttribute","string","toString","split","join","flaggedArr","localUrl","location","host","push","cleanArray","map","n","filter","arrayItem","toLowerCase","querySelectorAll","link","anchorHref","protocol","pathname","search","hash","absolutePath","getAttribute","i","length","indexOf","addEventListener","e","preventDefault","stopPropagation","currentUrl","newWindow","activeElement","firstTabbable","lastTabbable","which","shiftKey","trapKeyboardToSpeedbump","button","setTimeout","speedBumpModalEl","target","closest","keyCode"],"mappings":"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","sourcesContent":["/*!\n  * Speedbump v2.0.0\n*/\n\nconst speedBumpModal = function(options) {\n\tconst settings = Object.assign({\n\t\tspeedBumpTitle: 'You are leaving this website',\n\t\tspeedBumpSummary: 'You are leaving our website and entering a third party website over which we have no control. We do not endorse or guarantee and are not responsible for the content, links, privacy, or security of the website, or the products, services, information, or recommendations offered on this website.',\n\t\tspeedBumpContinueLink: 'Continue',\n\t\tspeedBumpContinueLinkClass: '',\n\t\tspeedBumpCancelLink: 'Cancel',\n\t\tspeedBumpCancelClass: '',\n\t\tspeedBumpIgnoreArray: [],\n\t\tspeedBumpHeadingTag: '<h4>',\n\t\tspeedBumpCloseButtonClass: '',\n\t\tspeedBumpCloseIconClass: '',\n\t}, options);\n\n\tconst continueClass = settings.speedBumpContinueLinkClass !== '' ? settings.speedBumpContinueLinkClass : '';\n\tconst cancelClass = settings.speedBumpCancelClass !== '' ? settings.speedBumpCancelClass : '';\n\tconst closeClass = settings.speedBumpCloseButtonClass !== '' ? settings.speedBumpCloseButtonClass : '';\n\t\n    // Build outer speedbump modal div\n\tconst speedBumpModal = document.createElement('div');\n\tspeedBumpModal.classList.add('speed-bump');\n\tspeedBumpModal.tabIndex = '-1';\n\tspeedBumpModal.role = 'dialog';\n\tspeedBumpModal.setAttribute('aria-modal', true);\n\tspeedBumpModal.setAttribute('aria-labelledby', 'speedBumpTitle');\n\tdocument.body.appendChild(speedBumpModal);\n\t\n    // Build outer speed-bump dialog\n\tconst speedBumpDialog = document.createElement('div');\n\tspeedBumpDialog.classList.add('speed-bump__dialog');\n\tspeedBumpDialog.setAttribute('role', 'document');\n\tspeedBumpModal.appendChild(speedBumpDialog);\n\t\n    // Build speed-bump content\n\tconst speedBumpContent = document.createElement('div');\n\tspeedBumpContent.classList.add('speed-bump__content');\n\tspeedBumpDialog.appendChild(speedBumpContent);\n\t\n    // Build speed-bump title\n    const speedBumpHeadingTagString = settings.speedBumpHeadingTag.replace('<', '').replace('>', '');\n\tconst speedBumpTitle = document.createElement(speedBumpHeadingTagString);\n\tspeedBumpTitle.classList.add('speed-bump__title');\n\tspeedBumpTitle.id = 'speedBumpTitle';\n\tspeedBumpTitle.innerHTML = settings.speedBumpTitle;\n\tspeedBumpContent.appendChild(speedBumpTitle);\n\t\n    // Build speed-bump summary\n\tconst speedBumpSummary = document.createElement('p');\n\tspeedBumpSummary.classList.add('speed-bump__summary');\n\tspeedBumpSummary.innerHTML = settings.speedBumpSummary;\n\tspeedBumpContent.appendChild(speedBumpSummary);\n\t\n    // Build speed-bump continue link\n\tconst speedBumpContinueLink = document.createElement('a');\n\tspeedBumpContinueLink.classList.add('speed-bump__continue');\n    classesToArray(continueClass).forEach(item => {\n        speedBumpContinueLink.classList.add(item);\n    });\n\tspeedBumpContinueLink.href = 'null';\n\tspeedBumpContinueLink.innerHTML = settings.speedBumpContinueLink;\n\tspeedBumpContent.appendChild(speedBumpContinueLink);\n\t\n    // Build speed-bump cancel link\n\tconst speedBumpCancelLink = document.createElement('button');\n\tspeedBumpCancelLink.classList.add('speed-bump__cancel');\n    classesToArray(cancelClass).forEach(item => {\n        speedBumpCancelLink.classList.add(item);\n    });\n    speedBumpCancelLink.type = 'button';\n\tspeedBumpCancelLink.innerHTML = settings.speedBumpCancelLink;\n\tspeedBumpContent.appendChild(speedBumpCancelLink);\n\t\n    // Build speed-bump close button\n\tconst speedBumpCloseButton = document.createElement('button');\n\tspeedBumpCloseButton.classList.add('speed-bump__close');\n    classesToArray(closeClass).forEach(item => {\n        speedBumpCloseButton.classList.add(item);\n    });\n\tspeedBumpCloseButton.setAttribute('type', 'button');\n\tspeedBumpCloseButton.setAttribute('aria-label', 'Close');\n\tspeedBumpCloseButton.setAttribute('type', 'button');\n\tspeedBumpContent.prepend(speedBumpCloseButton);\n\t\n    // Build speed-bump cancel button icon\n\tif (settings.speedBumpCloseIconClass !== '') {\n\t\tconst speedBumpCloseIcon = document.createElement('span');\n\t\tspeedBumpCloseIcon.className = settings.speedBumpCloseIconClass;\n\t\tspeedBumpCloseIcon.setAttribute('aria-hidden', 'true');\n\t\tspeedBumpCloseButton.appendChild(speedBumpCloseIcon);\n\t}\n\t\n    // Trap the keyboard to the off canvas elements when speedbump modal is showing\n\tlet focusBeforeSpeedbump;\n\tconst trapKeyboardToSpeedbump = () => {\n\t\tfocusBeforeSpeedbump = document.activeElement;\n\t\t\n        const firstTabbable = document.querySelector('.speed-bump__close');\n\t\tconst lastTabbable = document.querySelector('.speed-bump__cancel');\n\t\tfirstTabbable.focus();\n\t\t\n        lastTabbable.addEventListener('keydown', (e) => {\n\t\t\tif (e.which === 9 && !e.shiftKey) {\n\t\t\t\te.preventDefault();\n\t\t\t\tfirstTabbable.focus();\n\t\t\t}\n\t\t});\n\n\t\tfirstTabbable.addEventListener('keydown', (e) => {\n\t\t\tif (e.which === 9 && e.shiftKey) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlastTabbable.focus();\n\t\t\t}\n\t\t});\n\n\t\tdocument.querySelector('.speed-bump__content').focus();\n\t};\n\n    // Hide modal\n\tfunction speedBumpHide() {\n\t\tdocument.body.classList.remove('js-speedbump-showing');\n\t\tconst anchor = document.querySelector('[data-anchor-active]');\n\t\tif (anchor) {\n\t\t\tanchor.focus();\n\t\t\tanchor.removeAttribute('data-anchor-active');\n\t\t}\n\t\tdocument.querySelector('.speed-bump__continue').setAttribute('target', '');\n\t\tfocusBeforeSpeedbump.focus();\n\t}\n\n    // Convert class(es) string to array\n    function classesToArray(string) {\n        return string.toString().split(' ').join(',').split(',');\n    }\n\n\tconst flaggedArr = settings.speedBumpIgnoreArray;\n\tconst localUrl = location.host;\n\tflaggedArr.push(localUrl);\n\tconst cleanArray = flaggedArr.map((n) => n.split(' ').join('')).filter((arrayItem) => arrayItem !== '').map((arrayItem) => arrayItem.toLowerCase());\n\n\tfunction absolutePath(href) {\n\t\tconst link = document.createElement('a');\n\t\tlink.href = href;\n\t\treturn link.protocol + '//' + link.host + link.pathname + link.search + link.hash;\n\t}\n\n\tdocument.querySelectorAll('a[href]').forEach((link) => {\n\t\tconst anchorHref = absolutePath(link.getAttribute('href').toLowerCase());\n\t\tfor (let i = cleanArray.length - 1; i >= 0; --i) {\n\t\t\tif (anchorHref.indexOf(cleanArray[i]) !== -1) {\n\t\t\t\tlink.classList.add('js-no-speed-bump');\n\t\t\t}\n\t\t}\n\t});\n\n\tconst externalLinkSelectorString =\n        'a:not(.js-no-speed-bump)' +\n        ':not([href^=\"#\"])' +\n        ':not([href^=\"/\"])' +\n        ':not(.speed-bump__continue)' +\n        ':not([href=\"\"])'\n    ;\n\t\n    document.querySelectorAll(externalLinkSelectorString).forEach((link) => {\n\t\tlink.addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\t\n            document.body.classList.add('js-speedbump-showing');\n\t\t\t\n            const currentUrl = link.getAttribute('href');\n\t\t\tconst newWindow = link.getAttribute('target') === '_blank';\n\t\t\t\n            link.setAttribute('data-anchor-active', 'true');\n\t\t\t\n            speedBumpModal.focus();\n\t\t\t\n            document.querySelector('.speed-bump__continue').setAttribute('href', currentUrl);\n\t\t\t\n            if (newWindow) {\n\t\t\t\tdocument.querySelector('.speed-bump__continue').setAttribute('target', '_blank');\n\t\t\t}\n\n\t\t\ttrapKeyboardToSpeedbump();\n\t\t});\n\t});\n\n\tconst cancelButtons = document.querySelectorAll('.speed-bump__cancel, .speed-bump__close');\n    cancelButtons.forEach((button) => {\n\t\tbutton.addEventListener('click', speedBumpHide);\n\t});\n\n\tconst continueButton = document.querySelector('.speed-bump__continue');\n\tcontinueButton.addEventListener('click', () => {\n\t\tsetTimeout(speedBumpHide, 300);\n\t});\n\t\n    const speedBumpModalEl = document.querySelector('.speed-bump');\n\tspeedBumpModalEl.addEventListener('click', (e) => {\n\t\tif (!e.target.closest('.speed-bump__content')) {\n\t\t\tspeedBumpHide();\n\t\t}\n\t});\n    \n\tspeedBumpModalEl.addEventListener('keydown', (e) => {\n\t\tif (e.keyCode === 27) {\n\t\t\tspeedBumpHide();\n\t\t}\n\t});\n};"]}